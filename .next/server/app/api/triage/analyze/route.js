"use strict";(()=>{var e={};e.id=4798,e.ids=[4798],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},87594:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>f,patchFetch:()=>y,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>c,staticGenerationAsyncStorage:()=>d});var r={};s.r(r),s.d(r,{POST:()=>u});var a=s(22060),n=s(72433),o=s(10137),i=s(16097);async function u(e){try{let{session_token:t,narrative:s,classification:r,responses:a}=await e.json();if(!t)return i.NextResponse.json({error:"Missing session_token"},{status:400});if(!r&&s){let r=await fetch(new URL("/api/router/classify",e.url),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_token:t,narrative:s})});if(!r.ok)return i.NextResponse.json({error:"Classification failed"},{status:r.status});let a=await r.json();return i.NextResponse.json({step:"classified",classification:a})}if(r&&!a){let s=await fetch(new URL("/api/router/questions",e.url),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_token:t,classification:r})});if(!s.ok)return i.NextResponse.json({error:"Question generation failed"},{status:s.status});let a=await s.json();return i.NextResponse.json({step:"questions",...a})}if(r&&a){let s=await fetch(new URL("/api/router/assess",e.url),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_token:t,classification:r,responses:a})});if(!s.ok)return i.NextResponse.json({error:"Assessment failed"},{status:s.status});let n=await s.json();return i.NextResponse.json({step:"assessment",assessment:n})}return i.NextResponse.json({error:"Invalid payload"},{status:400})}catch(e){return console.error("/api/triage/analyze error:",e),i.NextResponse.json({error:"Internal error"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/triage/analyze/route",pathname:"/api/triage/analyze",filename:"route",bundlePath:"app/api/triage/analyze/route"},resolvedPagePath:"/workspaces/cursor-guidebuoy-ai-sg/app/api/triage/analyze/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:c}=p,f="/api/triage/analyze/route";function y(){return(0,o.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:d})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[2461,9582],()=>s(87594));module.exports=r})();