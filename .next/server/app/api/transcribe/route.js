"use strict";(()=>{var e={};e.id=9093,e.ids=[9093],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13969:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>l});var o={};t.r(o),t.d(o,{POST:()=>u});var n=t(22060),s=t(72433),a=t(10137),i=t(16097),p=t(49992);async function u(e){try{let r=(0,p.t)(e,"/api/transcribe");if(!(0,p.h)(r,10,6e4).ok)return i.NextResponse.json({error:"Rate limit exceeded"},{status:429});let t=(await e.formData()).get("audio");if(!t)return i.NextResponse.json({error:"No audio file provided"},{status:400});let o=process.env.OPENAI_API_KEY;if(!o)return i.NextResponse.json({error:"Missing OPENAI_API_KEY"},{status:500});let n=new FormData;n.append("file",t,t.name||"audio.webm"),n.append("model","whisper-1");let s=await fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${o}`},body:n});if(!s.ok){let e=await s.text();return console.error("[v0] Whisper API error:",s.status,e),i.NextResponse.json({error:"Transcription provider error"},{status:502})}let a=(await s.json()).text||"";return i.NextResponse.json({transcription:a,success:!0})}catch(e){return console.error("[v0] Transcription error:",e),i.NextResponse.json({error:"Transcription failed"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/transcribe/route",pathname:"/api/transcribe",filename:"route",bundlePath:"app/api/transcribe/route"},resolvedPagePath:"/workspaces/cursor-guidebuoy-ai-sg/app/api/transcribe/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:x}=c,m="/api/transcribe/route";function h(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:l})}},49992:(e,r,t)=>{t.d(r,{h:()=>n,t:()=>s});let o=new Map;function n(e,r=20,t=6e4){let n=Date.now(),s=o.get(e);return!s||s.expiresAt<=n?(o.set(e,{count:1,expiresAt:n+t}),{ok:!0,remaining:r-1,reset:n+t}):s.count>=r?{ok:!1,remaining:0,reset:s.expiresAt}:(s.count+=1,{ok:!0,remaining:Math.max(0,r-s.count),reset:s.expiresAt})}function s(e,r){let t=e.headers.get("x-forwarded-for")||e.ip||"unknown";return`${r}:${t}`}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[2461,9582],()=>t(13969));module.exports=o})();