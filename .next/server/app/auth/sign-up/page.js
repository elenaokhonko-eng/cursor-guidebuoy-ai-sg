(()=>{var e={};e.id=5301,e.ids=[5301],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},60811:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(69551),r(56497),r(69342);var t=r(4494),a=r(72433),i=r(76052),n=r.n(i),l=r(25639),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(s,o);let c=["",{children:["auth",{children:["sign-up",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,69551)),"/workspaces/cursor-guidebuoy-ai-sg/app/auth/sign-up/page.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,97189)),"/workspaces/cursor-guidebuoy-ai-sg/app/auth/sign-up/loading.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,56497)),"/workspaces/cursor-guidebuoy-ai-sg/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69342,23)),"next/dist/client/components/not-found-error"]}],d=["/workspaces/cursor-guidebuoy-ai-sg/app/auth/sign-up/page.tsx"],u="/auth/sign-up/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/auth/sign-up/page",pathname:"/auth/sign-up",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3667:(e,s,r)=>{Promise.resolve().then(r.bind(r,71245))},15602:()=>{},71245:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>f});var t=r(81484),a=r(17148),i=r(60564),n=r(26289),l=r(75511),o=r(822),c=r(67626),d=r(62051),u=r(99762),m=r(64193),p=r(61866),x=r(68390),h=r(28478);let g=(0,r(64704).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);function f(){let[e,s]=(0,p.useState)(""),[r,f]=(0,p.useState)(""),[v,j]=(0,p.useState)("victim"),[y,_]=(0,p.useState)(null),[b,w]=(0,p.useState)(!1),[N,P]=(0,p.useState)(!1),[S,k]=(0,p.useState)([]),[A,C]=(0,p.useState)(!1),q=(0,m.useRouter)(),E=(0,m.useSearchParams)().get("source"),I="router"===E,D=["Account creation and management","Case processing and document generation","Communication about your case progress","Platform improvements and analytics","Legal compliance and record keeping"],O=async(e,s)=>{try{let r=(0,a.e)();await r.from("analytics_events").insert({event_name:e,event_data:s,page_url:window.location.href,user_agent:navigator.userAgent,created_at:new Date().toISOString()})}catch(e){console.error("Analytics tracking error:",e)}},T=async s=>{if(s.preventDefault(),!N){_("Please agree to the Terms and Privacy Policy");return}if(r.length<8){_("Password must be at least 8 characters");return}let t=(0,a.e)();w(!0),_(null);try{let{data:s,error:a}=await t.auth.signUp({email:e,password:r,options:{emailRedirectTo:process.env.NEXT_PUBLIC_DEV_SUPABASE_REDIRECT_URL||`${window.location.origin}/app`,data:{role:v}}});if(a)throw a;if(s.user){await t.from("consent_logs").insert({user_id:s.user.id,email:e,consent_purposes:S.length>0?S:D,policy_version:"1.0",consented_at:new Date().toISOString()}),await O("signup_complete",{user_id:s.user.id,email:e,role:v,source:E||"direct",timestamp:new Date().toISOString()}),await O("consent_accepted",{user_id:s.user.id,purposes:S.length>0?S:D,timestamp:new Date().toISOString()});let r=!1;if(I){let e=(0,x.YW)();e&&(await (0,x.PA)(e,s.user.id)).success&&(r=!0,(0,x.dP)())}try{await fetch("/api/email/welcome",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:e,userName:e.split("@")[0],hasRouterSession:r})})}catch(e){console.error("[v0] Welcome email failed:",e)}q.push("/onboarding")}}catch(e){_(e instanceof Error?e.message:"An error occurred")}finally{w(!1)}};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-6",children:t.jsx("div",{className:"w-full max-w-md",children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)(u.default,{href:"/app",className:"flex items-center justify-center gap-2 mb-6 hover:opacity-80 transition-opacity",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center",children:t.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:"GB"})}),t.jsx("span",{className:"font-semibold text-lg",children:"GuideBuoy AI"})]}),I&&t.jsx("div",{className:"mb-4",children:t.jsx("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-accent/20 text-accent-foreground text-sm font-medium",children:"✓ Your case assessment is ready"})})]}),(0,t.jsxs)(n.Zb,{className:"rounded-xl",children:[(0,t.jsxs)(n.Ol,{children:[t.jsx(n.ll,{className:"text-2xl",children:"Create Account"}),t.jsx(n.SZ,{children:I?"Create your account to continue with your case":"Get started with your financial dispute case"})]}),t.jsx(n.aY,{children:(0,t.jsxs)("form",{onSubmit:T,children:[(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"grid gap-3",children:[t.jsx(o._,{children:"I am signing up as:"}),(0,t.jsxs)(d.E,{value:v,onValueChange:e=>j(e),children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-xl border border-border hover:bg-accent/5 transition-colors",children:[t.jsx(d.m,{value:"victim",id:"victim"}),(0,t.jsxs)(o._,{htmlFor:"victim",className:"flex items-center gap-2 cursor-pointer flex-1",children:[t.jsx(h.Z,{className:"h-4 w-4 text-primary"}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:"Victim"}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"I need help with my dispute"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-xl border border-border hover:bg-accent/5 transition-colors",children:[t.jsx(d.m,{value:"helper",id:"helper"}),(0,t.jsxs)(o._,{htmlFor:"helper",className:"flex items-center gap-2 cursor-pointer flex-1",children:[t.jsx(g,{className:"h-4 w-4 text-accent"}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:"Helper"}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"I'm helping someone with their case"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(o._,{htmlFor:"email",children:"Email"}),t.jsx(l.I,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:e,onChange:e=>s(e.target.value),className:"rounded-xl"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(o._,{htmlFor:"password",children:"Password (minimum 8 characters)"}),t.jsx(l.I,{id:"password",type:"password",required:!0,minLength:8,value:r,onChange:e=>f(e.target.value),className:"rounded-xl"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx(o._,{className:"text-sm font-medium",children:"Data Processing Consent (PDPA)"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground",children:[t.jsx("p",{children:"We will process your personal data for:"}),t.jsx("ul",{className:"space-y-1 ml-4",children:D.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-xs mt-1",children:"•"}),t.jsx("span",{children:e})]},s))})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[t.jsx(c.X,{id:"terms",checked:N,onCheckedChange:e=>P(e)}),(0,t.jsxs)(o._,{htmlFor:"terms",className:"text-sm leading-relaxed",children:["I agree to the"," ",t.jsx(u.default,{href:"/terms",className:"underline underline-offset-4",children:"Terms of Service"})," ","and acknowledge the"," ",t.jsx(u.default,{href:"/privacy",className:"underline underline-offset-4",children:"Privacy Policy"})]})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Your info is encrypted and secure."}),y&&t.jsx("p",{className:"text-sm text-destructive",children:y}),t.jsx(i.z,{type:"submit",className:"w-full rounded-full",disabled:b||!N,children:b?"Creating account...":"Create My Account"})]}),(0,t.jsxs)("div",{className:"mt-4 text-center text-sm",children:["Already have an account?"," ",t.jsx(u.default,{href:"/auth/login",className:"underline underline-offset-4",children:"Sign in"})]})]})})]})]})})})}},62051:(e,s,r)=>{"use strict";r.d(s,{E:()=>l,m:()=>o});var t=r(81484);r(61866);var a=r(81609),i=r(6444),n=r(34115);function l({className:e,...s}){return t.jsx(a.fC,{"data-slot":"radio-group",className:(0,n.cn)("grid gap-3",e),...s})}function o({className:e,...s}){return t.jsx(a.ck,{"data-slot":"radio-group-item",className:(0,n.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:t.jsx(a.z$,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:t.jsx(i.Z,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}},68390:(e,s,r)=>{"use strict";r.d(s,{PA:()=>l,YW:()=>a,dP:()=>i,lA:()=>n});var t=r(17148);function a(){return null}function i(){}async function n(e,s){let r=(0,t.e)(),{data:a,error:i}=await r.from("router_sessions").update(s).eq("session_token",e).select().single();return i?(console.error("[v0] Error updating router session:",i),null):a}async function l(e,s){let r=(0,t.e)();try{let{data:t,error:a}=await r.from("router_sessions").update({converted_to_user_id:s,conversion_date:new Date().toISOString()}).eq("session_token",e).select().single();if(a)return console.error("[v0] Error converting router session:",a),{success:!1};return await r.from("analytics_events").insert({event_name:"router_conversion_complete",user_id:s,session_id:e,event_data:{session_id:t.id,recommended_path:t.recommended_path,eligibility_score:t.eligibility_assessment?.eligibility_score},page_url:null,user_agent:null,created_at:new Date().toISOString()}),{success:!0,sessionData:t}}catch(e){return console.error("[v0] Conversion error:",e),{success:!1}}}},97189:(e,s,r)=>{"use strict";function t(){return null}r.r(s),r.d(s,{default:()=>t})},69551:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(42466).createProxy)(String.raw`/workspaces/cursor-guidebuoy-ai-sg/app/auth/sign-up/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[2461,1929,4405,1374,7784,6839,1543,12,7491],()=>r(60811));module.exports=t})();