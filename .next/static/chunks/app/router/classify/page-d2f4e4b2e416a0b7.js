(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{8909:function(e,r,t){Promise.resolve().then(t.bind(t,9284))},9284:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return g}});var n=t(1155),s=t(225),a=t(3943),i=t(7918),o=t(710),c=t(6676),u=t(3043),l=t(8566),d=t(9165),f=t(5703);function g(){let[e,r]=(0,s.useState)(!0),[t,g]=(0,s.useState)(null),[m,v]=(0,s.useState)(null),x=(0,a.useRouter)();return((0,s.useEffect)(()=>{(async()=>{try{let e=(0,f.YW)();if(!e){x.push("/router");return}let r=await (0,f.dv)(e);if(!r||!r.dispute_narrative){x.push("/router");return}let t=await fetch("/api/router/classify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_token:e,narrative:r.dispute_narrative})});if(!t.ok)throw Error("Classification failed");let n=await t.json();g(n),await (0,f.lA)(e,{classification_result:n}),setTimeout(()=>{x.push("/router/questions")},2e3)}catch(e){console.error("[v0] Error analyzing dispute:",e),v("Something went wrong. Please try again.")}finally{r(!1)}})()},[x]),m)?(0,n.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:(0,n.jsxs)(i.Zb,{className:"max-w-md w-full",children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)("div",{className:"flex justify-center mb-4",children:(0,n.jsx)(u.Z,{className:"h-12 w-12 text-destructive"})}),(0,n.jsx)(i.ll,{className:"text-center",children:"Analysis Error"})]}),(0,n.jsxs)(i.aY,{className:"text-center space-y-4",children:[(0,n.jsx)("p",{className:"text-muted-foreground",children:m}),(0,n.jsx)(o.z,{onClick:()=>x.push("/router"),className:"w-full",children:"Try Again"})]})]})}):(0,n.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:(0,n.jsxs)(i.Zb,{className:"max-w-2xl w-full rounded-xl shadow-lg",children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)("div",{className:"flex justify-center mb-4",children:e?(0,n.jsx)(l.Z,{className:"h-12 w-12 text-primary animate-spin"}):(0,n.jsx)(d.Z,{className:"h-12 w-12 text-accent"})}),(0,n.jsx)(i.ll,{className:"text-center text-2xl text-balance",children:e?"Analyzing Your Dispute...":"Analysis Complete"})]}),(0,n.jsx)(i.aY,{className:"space-y-6",children:e?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Reading your narrative..."})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse delay-100"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Identifying dispute type..."})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse delay-200"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Checking eligibility criteria..."})]})]}):t&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"bg-accent/10 p-4 rounded-xl",children:[(0,n.jsx)("p",{className:"font-semibold mb-2",children:"Dispute Category:"}),(0,n.jsx)(c.C,{variant:"secondary",className:"text-base bg-accent text-accent-foreground",children:t.category||"Financial Dispute"})]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Preparing personalized questions to assess your case..."})]})})]})})}},6676:function(e,r,t){"use strict";t.d(r,{C:function(){return c}});var n=t(1155);t(225);var s=t(6924),a=t(7987),i=t(2151);let o=(0,a.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:r,variant:t,asChild:a=!1,...c}=e,u=a?s.g7:"span";return(0,n.jsx)(u,{"data-slot":"badge",className:(0,i.cn)(o({variant:t}),r),...c})}},710:function(e,r,t){"use strict";t.d(r,{z:function(){return c}});var n=t(1155);t(225);var s=t(6924),a=t(7987),i=t(2151);let o=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-5 py-2.5 has-[>svg]:px-4",sm:"h-9 gap-1.5 px-4 has-[>svg]:px-3.5",lg:"h-11 px-7 has-[>svg]:px-5",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:r,variant:t,size:a,asChild:c=!1,...u}=e,l=c?s.g7:"button";return(0,n.jsx)(l,{"data-slot":"button",className:(0,i.cn)(o({variant:t,size:a,className:r})),...u})}},7918:function(e,r,t){"use strict";t.d(r,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return a},aY:function(){return u},ll:function(){return o}});var n=t(1155);t(225);var s=t(2151);function a(e){let{className:r,...t}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...t})}function i(e){let{className:r,...t}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...t})}function o(e){let{className:r,...t}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",r),...t})}function c(e){let{className:r,...t}=e;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",r),...t})}function u(e){let{className:r,...t}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",r),...t})}},5703:function(e,r,t){"use strict";t.d(r,{At:function(){return i},PA:function(){return u},YW:function(){return s},dP:function(){return a},dv:function(){return o},lA:function(){return c}});var n=t(4607);function s(){return localStorage.getItem("router_session_token")}function a(){localStorage.removeItem("router_session_token")}async function i(){let e=(0,n.e)(),r="router_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,15)),{data:t,error:s}=await e.from("router_sessions").insert({session_token:r,ip_address:null,user_agent:navigator.userAgent}).select().single();return s?(console.error("[v0] Error creating router session:",s),null):(localStorage.setItem("router_session_token",r),t)}async function o(e){let r=(0,n.e)(),{data:t,error:s}=await r.from("router_sessions").select("*").eq("session_token",e).single();return s?(console.error("[v0] Error fetching router session:",s),null):t}async function c(e,r){let t=(0,n.e)(),{data:s,error:a}=await t.from("router_sessions").update(r).eq("session_token",e).select().single();return a?(console.error("[v0] Error updating router session:",a),null):s}async function u(e,r){let t=(0,n.e)();try{var s;let{data:n,error:a}=await t.from("router_sessions").update({converted_to_user_id:r,conversion_date:new Date().toISOString()}).eq("session_token",e).select().single();if(a)return console.error("[v0] Error converting router session:",a),{success:!1};return await t.from("analytics_events").insert({event_name:"router_conversion_complete",user_id:r,session_id:e,event_data:{session_id:n.id,recommended_path:n.recommended_path,eligibility_score:null===(s=n.eligibility_assessment)||void 0===s?void 0:s.eligibility_score},page_url:window.location.href,user_agent:navigator.userAgent,created_at:new Date().toISOString()}),{success:!0,sessionData:n}}catch(e){return console.error("[v0] Conversion error:",e),{success:!1}}}},4607:function(e,r,t){"use strict";t.d(r,{e:function(){return a}});var n=t(1562),s=t(7706);function a(){return(0,n.createBrowserClient)(s.env.NEXT_PUBLIC_SUPABASE_URL,s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},2151:function(e,r,t){"use strict";t.d(r,{cn:function(){return a}});var n=t(3732),s=t(192);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,n.W)(r))}},1128:function(e,r,t){"use strict";t.d(r,{Z:function(){return c}});var n=t(225);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,n.forwardRef)((e,r)=>{let{color:t="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:l,iconNode:d,...f}=e;return(0,n.createElement)("svg",{ref:r,...i,width:s,height:s,stroke:t,strokeWidth:c?24*Number(o)/Number(s):o,className:a("lucide",u),...f},[...d.map(e=>{let[r,t]=e;return(0,n.createElement)(r,t)}),...Array.isArray(l)?l:[l]])}),c=(e,r)=>{let t=(0,n.forwardRef)((t,i)=>{let{className:c,...u}=t;return(0,n.createElement)(o,{ref:i,iconNode:r,className:a("lucide-".concat(s(e)),c),...u})});return t.displayName="".concat(e),t}},3043:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(1128).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9165:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(1128).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8566:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(1128).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3943:function(e,r,t){"use strict";var n=t(3747);t.o(n,"useParams")&&t.d(r,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(r,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[688,562,660,648,744],function(){return e(e.s=8909)}),_N_E=e.O()}]);