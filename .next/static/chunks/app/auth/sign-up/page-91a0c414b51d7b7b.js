(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[301],{7645:function(e,t,r){Promise.resolve().then(r.bind(r,3329))},3329:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(1155),s=r(4607),a=r(710),i=r(7918),o=r(3774),c=r(9151),l=r(431),d=r(2600),u=r(4149),m=r(3943),f=r(225),p=r(5703),x=r(8859);let g=(0,r(1128).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var h=r(7706);function v(){let[e,t]=(0,f.useState)(""),[r,v]=(0,f.useState)(""),[b,y]=(0,f.useState)("victim"),[j,_]=(0,f.useState)(null),[w,N]=(0,f.useState)(!1),[k,S]=(0,f.useState)(!1),[E,C]=(0,f.useState)([]),[I,P]=(0,f.useState)(!1),A=(0,m.useRouter)(),D=(0,m.useSearchParams)().get("source"),O="router"===D,z=["Account creation and management","Case processing and document generation","Communication about your case progress","Platform improvements and analytics","Legal compliance and record keeping"];(0,f.useEffect)(()=>{O&&R("router_conversion_start",{page:"signup",source:"router",timestamp:new Date().toISOString()});let e=()=>{I||(P(!0),R("signup_start",{page:"signup",source:D||"direct",timestamp:new Date().toISOString()}))},t=document.getElementById("email");return null==t||t.addEventListener("focus",e,{once:!0}),()=>{null==t||t.removeEventListener("focus",e)}},[I,O,D]);let R=async(e,t)=>{try{let r=(0,s.e)();await r.from("analytics_events").insert({event_name:e,event_data:t,page_url:window.location.href,user_agent:navigator.userAgent,created_at:new Date().toISOString()})}catch(e){console.error("Analytics tracking error:",e)}},Z=async t=>{if(t.preventDefault(),!k){_("Please agree to the Terms and Privacy Policy");return}if(r.length<8){_("Password must be at least 8 characters");return}let n=(0,s.e)();N(!0),_(null);try{let{data:t,error:s}=await n.auth.signUp({email:e,password:r,options:{emailRedirectTo:h.env.NEXT_PUBLIC_DEV_SUPABASE_REDIRECT_URL||"".concat(window.location.origin,"/app"),data:{role:b}}});if(s)throw s;if(t.user){await n.from("consent_logs").insert({user_id:t.user.id,email:e,consent_purposes:E.length>0?E:z,policy_version:"1.0",consented_at:new Date().toISOString()}),await R("signup_complete",{user_id:t.user.id,email:e,role:b,source:D||"direct",timestamp:new Date().toISOString()}),await R("consent_accepted",{user_id:t.user.id,purposes:E.length>0?E:z,timestamp:new Date().toISOString()});let r=!1;if(O){let e=(0,p.YW)();e&&(await (0,p.PA)(e,t.user.id)).success&&(r=!0,(0,p.dP)())}try{await fetch("/api/email/welcome",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:e,userName:e.split("@")[0],hasRouterSession:r})})}catch(e){console.error("[v0] Welcome email failed:",e)}A.push("/onboarding")}}catch(e){_(e instanceof Error?e.message:"An error occurred")}finally{N(!1)}};return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background p-6",children:(0,n.jsx)("div",{className:"w-full max-w-md",children:(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsxs)(u.default,{href:"/app",className:"flex items-center justify-center gap-2 mb-6 hover:opacity-80 transition-opacity",children:[(0,n.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-primary-foreground font-bold text-sm",children:"GB"})}),(0,n.jsx)("span",{className:"font-semibold text-lg",children:"GuideBuoy AI"})]}),O&&(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-accent/20 text-accent-foreground text-sm font-medium",children:"✓ Your case assessment is ready"})})]}),(0,n.jsxs)(i.Zb,{className:"rounded-xl",children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{className:"text-2xl",children:"Create Account"}),(0,n.jsx)(i.SZ,{children:O?"Create your account to continue with your case":"Get started with your financial dispute case"})]}),(0,n.jsx)(i.aY,{children:(0,n.jsxs)("form",{onSubmit:Z,children:[(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,n.jsxs)("div",{className:"grid gap-3",children:[(0,n.jsx)(c._,{children:"I am signing up as:"}),(0,n.jsxs)(d.E,{value:b,onValueChange:e=>y(e),children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-xl border border-border hover:bg-accent/5 transition-colors",children:[(0,n.jsx)(d.m,{value:"victim",id:"victim"}),(0,n.jsxs)(c._,{htmlFor:"victim",className:"flex items-center gap-2 cursor-pointer flex-1",children:[(0,n.jsx)(x.Z,{className:"h-4 w-4 text-primary"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium",children:"Victim"}),(0,n.jsx)("div",{className:"text-xs text-muted-foreground",children:"I need help with my dispute"})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-xl border border-border hover:bg-accent/5 transition-colors",children:[(0,n.jsx)(d.m,{value:"helper",id:"helper"}),(0,n.jsxs)(c._,{htmlFor:"helper",className:"flex items-center gap-2 cursor-pointer flex-1",children:[(0,n.jsx)(g,{className:"h-4 w-4 text-accent"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium",children:"Helper"}),(0,n.jsx)("div",{className:"text-xs text-muted-foreground",children:"I'm helping someone with their case"})]})]})]})]})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(c._,{htmlFor:"email",children:"Email"}),(0,n.jsx)(o.I,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:e,onChange:e=>t(e.target.value),className:"rounded-xl"})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(c._,{htmlFor:"password",children:"Password (minimum 8 characters)"}),(0,n.jsx)(o.I,{id:"password",type:"password",required:!0,minLength:8,value:r,onChange:e=>v(e.target.value),className:"rounded-xl"})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)(c._,{className:"text-sm font-medium",children:"Data Processing Consent (PDPA)"}),(0,n.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,n.jsx)("p",{children:"We will process your personal data for:"}),(0,n.jsx)("ul",{className:"space-y-1 ml-4",children:z.map((e,t)=>(0,n.jsxs)("li",{className:"flex items-start gap-2",children:[(0,n.jsx)("span",{className:"text-xs mt-1",children:"•"}),(0,n.jsx)("span",{children:e})]},t))})]})]}),(0,n.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,n.jsx)(l.X,{id:"terms",checked:k,onCheckedChange:e=>S(e)}),(0,n.jsxs)(c._,{htmlFor:"terms",className:"text-sm leading-relaxed",children:["I agree to the"," ",(0,n.jsx)(u.default,{href:"/terms",className:"underline underline-offset-4",children:"Terms of Service"})," ","and acknowledge the"," ",(0,n.jsx)(u.default,{href:"/privacy",className:"underline underline-offset-4",children:"Privacy Policy"})]})]}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Your info is encrypted and secure."}),j&&(0,n.jsx)("p",{className:"text-sm text-destructive",children:j}),(0,n.jsx)(a.z,{type:"submit",className:"w-full rounded-full",disabled:w||!k,children:w?"Creating account...":"Create My Account"})]}),(0,n.jsxs)("div",{className:"mt-4 text-center text-sm",children:["Already have an account?"," ",(0,n.jsx)(u.default,{href:"/auth/login",className:"underline underline-offset-4",children:"Sign in"})]})]})})]})]})})})}},710:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(1155);r(225);var s=r(6924),a=r(7987),i=r(2151);let o=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-5 py-2.5 has-[>svg]:px-4",sm:"h-9 gap-1.5 px-4 has-[>svg]:px-3.5",lg:"h-11 px-7 has-[>svg]:px-5",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:r,size:a,asChild:c=!1,...l}=e,d=c?s.g7:"button";return(0,n.jsx)(d,{"data-slot":"button",className:(0,i.cn)(o({variant:r,size:a,className:t})),...l})}},7918:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return a},aY:function(){return l},ll:function(){return o}});var n=r(1155);r(225);var s=r(2151);function a(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function o(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...r})}function c(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...r})}function l(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...r})}},431:function(e,t,r){"use strict";r.d(t,{X:function(){return P}});var n=r(1155),s=r(225),a=r(5629),i=r(9459),o=r(3643),c=r(8184),l=r(1629),d=r(2473),u=r(7018),m=r(5053),f="Checkbox",[p,x]=(0,i.b)(f),[g,h]=p(f);function v(e){let{__scopeCheckbox:t,checked:r,children:a,defaultChecked:i,disabled:o,form:l,name:d,onCheckedChange:u,required:m,value:p="on",internal_do_not_use_render:x}=e,[h,v]=(0,c.T)({prop:r,defaultProp:null!=i&&i,onChange:u,caller:f}),[b,y]=s.useState(null),[j,_]=s.useState(null),w=s.useRef(!1),N=!b||!!l||!!b.closest("form"),k={checked:h,disabled:o,setChecked:v,control:b,setControl:y,name:d,form:l,value:p,hasConsumerStoppedPropagationRef:w,required:m,defaultChecked:!S(i)&&i,isFormControl:N,bubbleInput:j,setBubbleInput:_};return(0,n.jsx)(g,{scope:t,...k,children:"function"==typeof x?x(k):a})}var b="CheckboxTrigger",y=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,onKeyDown:i,onClick:c,...l}=e,{control:d,value:u,disabled:f,checked:p,required:x,setControl:g,setChecked:v,hasConsumerStoppedPropagationRef:y,isFormControl:j,bubbleInput:_}=h(b,r),w=(0,a.e)(t,g),N=s.useRef(p);return s.useEffect(()=>{let e=null==d?void 0:d.form;if(e){let t=()=>v(N.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[d,v]),(0,n.jsx)(m.WV.button,{type:"button",role:"checkbox","aria-checked":S(p)?"mixed":p,"aria-required":x,"data-state":E(p),"data-disabled":f?"":void 0,disabled:f,value:u,...l,ref:w,onKeyDown:(0,o.Mj)(i,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,o.Mj)(c,e=>{v(e=>!!S(e)||!e),_&&j&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})})});y.displayName=b;var j=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:s,checked:a,defaultChecked:i,required:o,disabled:c,value:l,onCheckedChange:d,form:u,...m}=e;return(0,n.jsx)(v,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:c,required:o,onCheckedChange:d,name:s,form:u,value:l,internal_do_not_use_render:e=>{let{isFormControl:s}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y,{...m,ref:t,__scopeCheckbox:r}),s&&(0,n.jsx)(k,{__scopeCheckbox:r})]})}})});j.displayName=f;var _="CheckboxIndicator",w=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:s,...a}=e,i=h(_,r);return(0,n.jsx)(u.z,{present:s||S(i.checked)||!0===i.checked,children:(0,n.jsx)(m.WV.span,{"data-state":E(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});w.displayName=_;var N="CheckboxBubbleInput",k=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,...i}=e,{control:o,hasConsumerStoppedPropagationRef:c,checked:u,defaultChecked:f,required:p,disabled:x,name:g,value:v,form:b,bubbleInput:y,setBubbleInput:j}=h(N,r),_=(0,a.e)(t,j),w=(0,l.D)(u),k=(0,d.t)(o);s.useEffect(()=>{if(!y)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!c.current;if(w!==u&&e){let r=new Event("click",{bubbles:t});y.indeterminate=S(u),e.call(y,!S(u)&&u),y.dispatchEvent(r)}},[y,w,u,c]);let E=s.useRef(!S(u)&&u);return(0,n.jsx)(m.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=f?f:E.current,required:p,disabled:x,name:g,value:v,form:b,...i,tabIndex:-1,ref:_,style:{...i.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function S(e){return"indeterminate"===e}function E(e){return S(e)?"indeterminate":e?"checked":"unchecked"}k.displayName=N;var C=r(3075),I=r(2151);function P(e){let{className:t,...r}=e;return(0,n.jsx)(j,{"data-slot":"checkbox",className:(0,I.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,n.jsx)(w,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,n.jsx)(C.Z,{className:"size-3.5"})})})}},3774:function(e,t,r){"use strict";r.d(t,{I:function(){return a}});var n=r(1155);r(225);var s=r(2151);function a(e){let{className:t,type:r,...a}=e;return(0,n.jsx)("input",{type:r,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-lg border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}},9151:function(e,t,r){"use strict";r.d(t,{_:function(){return i}});var n=r(1155);r(225);var s=r(1367),a=r(2151);function i(e){let{className:t,...r}=e;return(0,n.jsx)(s.f,{"data-slot":"label",className:(0,a.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}},2600:function(e,t,r){"use strict";r.d(t,{E:function(){return o},m:function(){return c}});var n=r(1155);r(225);var s=r(8356),a=r(1198),i=r(2151);function o(e){let{className:t,...r}=e;return(0,n.jsx)(s.fC,{"data-slot":"radio-group",className:(0,i.cn)("grid gap-3",t),...r})}function c(e){let{className:t,...r}=e;return(0,n.jsx)(s.ck,{"data-slot":"radio-group-item",className:(0,i.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,n.jsx)(s.z$,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,n.jsx)(a.Z,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}},5703:function(e,t,r){"use strict";r.d(t,{At:function(){return i},PA:function(){return l},YW:function(){return s},dP:function(){return a},dv:function(){return o},lA:function(){return c}});var n=r(4607);function s(){return localStorage.getItem("router_session_token")}function a(){localStorage.removeItem("router_session_token")}async function i(){let e=(0,n.e)(),t="router_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,15)),{data:r,error:s}=await e.from("router_sessions").insert({session_token:t,ip_address:null,user_agent:navigator.userAgent}).select().single();return s?(console.error("[v0] Error creating router session:",s),null):(localStorage.setItem("router_session_token",t),r)}async function o(e){let t=(0,n.e)(),{data:r,error:s}=await t.from("router_sessions").select("*").eq("session_token",e).single();return s?(console.error("[v0] Error fetching router session:",s),null):r}async function c(e,t){let r=(0,n.e)(),{data:s,error:a}=await r.from("router_sessions").update(t).eq("session_token",e).select().single();return a?(console.error("[v0] Error updating router session:",a),null):s}async function l(e,t){let r=(0,n.e)();try{var s;let{data:n,error:a}=await r.from("router_sessions").update({converted_to_user_id:t,conversion_date:new Date().toISOString()}).eq("session_token",e).select().single();if(a)return console.error("[v0] Error converting router session:",a),{success:!1};return await r.from("analytics_events").insert({event_name:"router_conversion_complete",user_id:t,session_id:e,event_data:{session_id:n.id,recommended_path:n.recommended_path,eligibility_score:null===(s=n.eligibility_assessment)||void 0===s?void 0:s.eligibility_score},page_url:window.location.href,user_agent:navigator.userAgent,created_at:new Date().toISOString()}),{success:!0,sessionData:n}}catch(e){return console.error("[v0] Conversion error:",e),{success:!1}}}},4607:function(e,t,r){"use strict";r.d(t,{e:function(){return a}});var n=r(1562),s=r(7706);function a(){return(0,n.createBrowserClient)(s.env.NEXT_PUBLIC_SUPABASE_URL,s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},2151:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(3732),s=r(192);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}},3075:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(1128).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8859:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(1128).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[688,708,562,728,468,809,660,648,744],function(){return e(e.s=7645)}),_N_E=e.O()}]);