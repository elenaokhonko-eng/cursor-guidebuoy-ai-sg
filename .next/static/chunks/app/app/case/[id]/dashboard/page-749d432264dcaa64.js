(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[500],{1824:function(e,t,a){Promise.resolve().then(a.bind(a,5758))},5758:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var s=a(1155),r=a(225),n=a(3943),i=a(4607),l=a(7918),c=a(710),o=a(6676),d=a(3774),u=a(9151),m=a(6154),x=a(2600),f=a(8038),p=a(1128);let h=(0,p.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var g=a(2680),v=a(3043),y=a(8566),b=a(9165),j=a(923);let N=(0,p.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var w=a(5430),k=a(6478);let _=(0,p.Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var C=a(2163),Z=a(4149),q=a(3206);async function z(e,t,a,s,r){let n=(0,i.e)(),l=a.name.split(".").pop(),c="".concat(Date.now(),"-").concat(Math.random().toString(36).substring(7),".").concat(l),o="".concat(e,"/").concat(s,"/").concat(c),{data:d,error:u}=await n.storage.from("evidence").upload(o,a,{cacheControl:"3600",upsert:!1});if(u)throw u;let{data:m,error:x}=await n.from("evidence").insert({case_id:e,user_id:t,filename:a.name,file_path:o,file_type:a.type,file_size:a.size,description:r||a.name,category:s}).select().single();if(x)throw x;return await n.from("analytics_events").insert({user_id:t,event_name:"evidence_uploaded",event_data:{case_id:e,filename:a.name,category:s,file_size:a.size},page_url:window.location.href,user_agent:navigator.userAgent}),m}async function S(e,t){let a=(0,i.e)(),{data:s}=await a.from("evidence").select("*").eq("id",e).single();if(!s)throw Error("Evidence not found");await a.storage.from("evidence").remove([s.file_path]),await a.from("evidence").delete().eq("id",e),await a.from("analytics_events").insert({user_id:t,event_name:"evidence_deleted",event_data:{case_id:s.case_id,evidence_id:e},page_url:window.location.href,user_agent:navigator.userAgent})}let I=[{key:"institution_name",question:"What is the name of the financial institution?",type:"text",required:!0,placeholder:"e.g., DBS Bank, OCBC Bank, Great Eastern"},{key:"account_details",question:"What are your account/policy details?",type:"textarea",required:!0,placeholder:"Account number, policy number, or other relevant identifiers"},{key:"incident_summary",question:"Describe what happened in detail",type:"textarea",required:!0,placeholder:"Provide a chronological account of events, including dates, amounts, and key interactions"},{key:"financial_impact",question:"What is the financial impact?",type:"textarea",required:!0,placeholder:"Describe losses, damages, or financial harm you've experienced"},{key:"desired_outcome",question:"What outcome are you seeking?",type:"textarea",required:!0,placeholder:"e.g., Full refund of $5,000, reversal of charges, policy reinstatement"},{key:"previous_contact",question:"Have you contacted the institution about this issue?",type:"radio",options:["Yes","No"],required:!0},{key:"contact_details",question:"Describe your previous contact attempts",type:"textarea",required:!1,placeholder:"When did you contact them? What was their response?",showIf:{key:"previous_contact",value:"Yes"}}];function D(){var e,t,a;let[p,D]=(0,r.useState)(null),[M,P]=(0,r.useState)(null),[O,E]=(0,r.useState)(!0),[F,A]=(0,r.useState)(null),B=(0,n.useRouter)(),U=(0,n.useParams)().id,[T,R]=(0,r.useState)(0),[Y,H]=(0,r.useState)({}),[W,G]=(0,r.useState)(!1),[L,V]=(0,r.useState)(!1),[$,K]=(0,r.useState)([]),[X,J]=(0,r.useState)(!1),[Q,ee]=(0,r.useState)({}),[et,ea]=(0,r.useState)(!1),[es,er]=(0,r.useState)([]),[en,ei]=(0,r.useState)(!1),[el,ec]=(0,r.useState)(""),[eo,ed]=(0,r.useState)(!1),[eu,em]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{let e=(0,i.e)(),{data:{user:t}}=await e.auth.getUser();if(!t){B.push("/auth/login");return}A(t);let{data:a,error:s}=await e.from("cases").select("*").eq("id",U).eq("user_id",t.id).single();if(s||!a){B.push("/app/case/new");return}let{data:r}=await e.from("payments").select("*").eq("case_id",U).eq("user_id",t.id).eq("payment_status","completed").single(),{data:n}=await e.from("case_responses").select("*").eq("case_id",U),l={};null==n||n.forEach(e=>{l[e.question_key]=e.response_value});let{data:c}=await e.from("evidence").select("id, filename, file_type, file_size, category").eq("case_id",U);c&&K(c),V(I.every(e=>!e.required||l[e.key])),D(a),P(r),H(l),E(!1)})()},[U,B]);let ex=async()=>{let e=(0,i.e)();await e.auth.signOut(),B.push("/")},ef=async()=>{let e=I[T];(!e.required||Y[e.key])&&(T<I.length-1?R(T+1):await ep())},ep=async()=>{G(!0);let e=(0,i.e)();try{let t=Object.entries(Y).map(t=>{var a;let[s,r]=t;return e.from("case_responses").upsert({case_id:U,question_key:s,response_value:r,response_type:(null===(a=I.find(e=>e.key===s))||void 0===a?void 0:a.type)||"text"},{onConflict:"case_id,question_key"})});await Promise.all(t),await e.from("cases").update({status:"evidence",updated_at:new Date().toISOString()}).eq("id",U),await e.from("analytics_events").insert({user_id:p.user_id,event_name:"intake_complete",event_data:{case_id:U},page_url:window.location.href,user_agent:navigator.userAgent}),V(!0)}catch(e){console.error("Error completing intake:",e)}finally{G(!1)}},eh=(0,r.useCallback)(async e=>{if(!M||0===e.length||!F)return;J(!0),er([]);let t=[];try{let a=Array.from(e);for(let e=0;e<a.length;e++){let s=a[e],r="".concat(Date.now(),"-").concat(e);if(s.size>10485760){t.push("".concat(s.name," is too large (max 10MB)"));continue}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/png","image/gif","text/plain","text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(s.type)){t.push("".concat(s.name," has an unsupported format"));continue}ee(e=>({...e,[r]:0}));try{let e=setInterval(()=>{ee(t=>{let a=t[r]||0;return a>=90?(clearInterval(e),t):{...t,[r]:a+10}})},100),t=await z(U,F.id,s,"evidence","Uploaded: ".concat(s.name));clearInterval(e),ee(e=>({...e,[r]:100})),K(e=>[...e,{id:t.id,filename:t.filename,file_type:t.file_type,file_size:t.file_size,category:t.category}]),setTimeout(()=>{ee(e=>{let t={...e};return delete t[r],t})},1e3)}catch(e){console.error("Upload error:",e),t.push("Failed to upload ".concat(s.name)),ee(e=>{let t={...e};return delete t[r],t})}}t.length>0&&er(t)}finally{J(!1)}},[M,F,U]),eg=(0,r.useCallback)(async e=>{if(F)try{await S(e,F.id),K(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Delete error:",e),alert("Failed to delete file. Please try again.")}},[F]),ev=(0,r.useCallback)(e=>{e.preventDefault(),ea(!1),eh(e.dataTransfer.files)},[eh]),ey=(0,r.useCallback)(e=>{e.preventDefault(),ea(!0)},[]),eb=(0,r.useCallback)(e=>{e.preventDefault(),ea(!1)},[]),ej=async()=>{if(el&&F){ed(!0);try{(await fetch("/api/cases/".concat(U,"/share"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:el})})).ok&&(em(!0),ec(""),setTimeout(()=>em(!1),3e3))}catch(e){console.error("Error sending invite:",e)}finally{ed(!1)}}},eN=async()=>{try{ei(!0);let e=await fetch("/api/payments/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({caseId:U})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to start checkout");t.url&&(window.location.href=t.url)}catch(e){console.error("Checkout error:",e),alert("Unable to start checkout. Please try again.")}finally{ei(!1)}},ew=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},ek=e=>e.startsWith("image/")?(0,s.jsx)(h,{className:"h-5 w-5 text-blue-600"}):e.includes("pdf")?(0,s.jsx)(g.Z,{className:"h-5 w-5 text-red-600"}):e.includes("word")||e.includes("document")?(0,s.jsx)(g.Z,{className:"h-5 w-5 text-blue-700"}):e.includes("excel")||e.includes("spreadsheet")?(0,s.jsx)(g.Z,{className:"h-5 w-5 text-green-600"}):(0,s.jsx)(g.Z,{className:"h-5 w-5 text-muted-foreground"});if(O)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading dashboard..."})]})});if((null==p?void 0:p.claim_type)!=="fidrec_scam"&&(null==p?void 0:p.claim_type)!=="fidrec_fraud")return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:(0,s.jsxs)(l.Zb,{className:"max-w-md w-full rounded-xl",children:[(0,s.jsxs)(l.Ol,{children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)(v.Z,{className:"h-12 w-12 text-destructive"})}),(0,s.jsx)(l.ll,{className:"text-center",children:"Case Type Not Supported"})]}),(0,s.jsxs)(l.aY,{className:"text-center space-y-4",children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"This MVP currently only supports FIDReC scam and fraud cases. Other case types will be available soon."}),(0,s.jsx)(c.z,{onClick:()=>B.push("/"),className:"w-full rounded-full",children:"Return Home"})]})]})});let e_=I[T],eC=(T+1)/I.length*100;return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)("header",{className:"border-b border-border/50 bg-card/50 backdrop-blur-sm sticky top-0 z-50",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(Z.default,{href:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-primary-foreground font-bold text-sm",children:"GB"})}),(0,s.jsx)("span",{className:"font-semibold text-lg",children:"GuideBuoy AI"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(o.C,{variant:"secondary",className:"rounded-full",children:null==p?void 0:null===(e=p.claim_type)||void 0===e?void 0:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}),M&&(0,s.jsx)(o.C,{variant:"default",className:"bg-accent text-accent-foreground rounded-full",children:"Premium Access"}),F&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground hidden sm:inline",children:F.email}),(0,s.jsx)(c.z,{variant:"outline",size:"sm",onClick:ex,className:"rounded-full bg-transparent",children:"Sign Out"})]})]})]})})}),(0,s.jsx)("div",{className:"bg-accent/10 border-b border-accent/20 py-2",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("p",{className:"text-sm text-foreground text-center",children:[(0,s.jsx)("strong",{children:"Disclaimer:"})," GuideBuoy AI is an AI assistant, not a law firm. We provide guidance, not legal advice."]})})}),(0,s.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,s.jsx)(l.Zb,{className:"bg-gradient-to-r from-primary/5 to-accent/5 border-primary/20 rounded-xl",children:(0,s.jsx)(l.Ol,{children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(q.default,{src:"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/GuideBuoy%20AI%20Lumi.jpg-aoPz1T5V8wp6KMHOH8WvFjPT811qv1.jpeg",alt:"Lumi",width:60,height:60,className:"rounded-full"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(l.ll,{className:"text-xl mb-2 text-balance",children:M?L?0===$.length?"Upload your evidence":"Your case is ready!":"Let's build your case story":"Ready to unlock your case pack?"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4 text-pretty",children:M?L?0===$.length?"Add supporting documents to strengthen your case.":"Review your information and generate your professional case pack.":"Answer a few questions to build a strong foundation for your FIDReC submission.":"Get professional documents and step-by-step guidance for S$99."}),!M&&(0,s.jsx)(c.z,{size:"lg",className:"rounded-full",onClick:eN,disabled:en,children:en?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Redirecting to Checkout..."]}):(0,s.jsx)(s.Fragment,{children:"Unlock Case Pack - S$99"})})]})]})})}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)(l.Zb,{className:"rounded-xl",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(g.Z,{className:"h-5 w-5"}),"Case Details"]})}),(0,s.jsxs)(l.aY,{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Case Type:"}),(0,s.jsx)("span",{className:"font-medium",children:null==p?void 0:null===(t=p.claim_type)||void 0===t?void 0:t.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,s.jsx)(o.C,{variant:"secondary",className:"rounded-full",children:null==p?void 0:p.status})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Eligibility:"}),(0,s.jsx)(o.C,{variant:(null==p?void 0:p.eligibility_status)==="eligible"?"default":"secondary",className:"rounded-full bg-accent text-accent-foreground",children:null==p?void 0:p.eligibility_status})]}),(null==p?void 0:p.claim_amount)&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Amount:"}),(0,s.jsxs)("span",{className:"font-medium",children:["S$",p.claim_amount.toLocaleString()]})]}),(null==p?void 0:p.strength_score)&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Strength:"}),(0,s.jsx)(o.C,{variant:"high"===p.strength_score?"default":"medium"===p.strength_score?"secondary":"destructive",className:"rounded-full",children:p.strength_score})]})]})]}),(0,s.jsxs)(l.Zb,{className:"rounded-xl",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(b.Z,{className:"h-5 w-5"}),"Progress Tracker"]})}),(0,s.jsxs)(l.aY,{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Case Intake:"}),(0,s.jsx)(o.C,{variant:L?"default":"secondary",className:"rounded-full",children:L?"Complete":"In Progress"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Evidence Upload:"}),(0,s.jsxs)(o.C,{variant:$.length>0?"default":"secondary",className:"rounded-full bg-accent text-accent-foreground",children:[$.length," files"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Documents:"}),(0,s.jsx)(o.C,{variant:"secondary",className:"rounded-full",children:"Ready to Generate"})]})]})]})]}),M&&!L&&(0,s.jsxs)(l.Zb,{className:"rounded-xl border-primary/20",children:[(0,s.jsxs)(l.Ol,{children:[(0,s.jsx)(l.ll,{children:"Guided Case Intake"}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Question ",T+1," of ",I.length]}),(0,s.jsx)(f.E,{value:eC,className:"h-2 w-1/2"})]})]}),(0,s.jsxs)(l.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(u._,{className:"text-lg font-semibold mb-3 block",children:e_.question}),e_.required&&(0,s.jsx)(o.C,{variant:"secondary",className:"mb-3",children:"Required"}),"text"===e_.type&&(0,s.jsx)(d.I,{type:"text",value:Y[e_.key]||"",onChange:e=>H(t=>({...t,[e_.key]:e.target.value})),placeholder:e_.placeholder,className:"mt-2"}),"textarea"===e_.type&&(0,s.jsx)(m.g,{value:Y[e_.key]||"",onChange:e=>H(t=>({...t,[e_.key]:e.target.value})),placeholder:e_.placeholder,rows:6,className:"mt-2"}),"radio"===e_.type&&(0,s.jsx)(x.E,{value:Y[e_.key]||"",onValueChange:e=>H(t=>({...t,[e_.key]:e})),children:null===(a=e_.options)||void 0===a?void 0:a.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(x.m,{value:e,id:e}),(0,s.jsx)(u._,{htmlFor:e,children:e})]},e))})]}),(0,s.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,s.jsx)(c.z,{variant:"outline",onClick:()=>{T>0&&R(T-1)},disabled:0===T,className:"rounded-full bg-transparent",children:"Back"}),(0,s.jsx)(c.z,{onClick:ef,disabled:e_.required&&!Y[e_.key]||W,className:"rounded-full",children:W?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):T===I.length-1?"Complete Intake":(0,s.jsxs)(s.Fragment,{children:["Next",(0,s.jsx)(j.Z,{className:"h-4 w-4 ml-2"})]})})]})]})]}),M&&L&&(0,s.jsxs)(l.Zb,{className:"rounded-xl",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(N,{className:"h-5 w-5"}),"Upload Evidence"]})}),(0,s.jsxs)(l.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-xl p-8 text-center transition-all duration-200 ".concat(et?"border-primary bg-primary/10 scale-[1.02] shadow-lg":"border-border hover:border-primary/50 hover:bg-accent/5"),onDrop:ev,onDragOver:ey,onDragLeave:eb,children:[(0,s.jsx)("div",{className:"transition-transform duration-200 ".concat(et?"scale-110":"scale-100"),children:(0,s.jsx)(N,{className:"h-12 w-12 mx-auto mb-4 transition-colors ".concat(et?"text-primary":"text-muted-foreground")})}),(0,s.jsx)("p",{className:"text-lg font-medium mb-2",children:et?"Drop your files here":"Drop files here or click to upload"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"PDF, images, Word docs, Excel files. Max 10MB per file."}),(0,s.jsx)(d.I,{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif,.txt,.csv,.xls,.xlsx",onChange:e=>e.target.files&&eh(e.target.files),className:"hidden",id:"file-upload",disabled:X}),(0,s.jsx)(u._,{htmlFor:"file-upload",children:(0,s.jsx)(c.z,{variant:"outline",disabled:X,className:"rounded-full bg-transparent",asChild:!0,children:(0,s.jsx)("span",{children:X?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N,{className:"h-4 w-4 mr-2"}),"Choose Files"]})})})}),es.length>0&&(0,s.jsx)("div",{className:"mt-4 space-y-2",children:es.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-destructive bg-destructive/10 p-3 rounded-lg",children:[(0,s.jsx)(v.Z,{className:"h-4 w-4 flex-shrink-0"}),(0,s.jsx)("p",{className:"text-sm text-left",children:e})]},t))}),Object.entries(Q).length>0&&(0,s.jsx)("div",{className:"mt-4 space-y-3",children:Object.entries(Q).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"bg-accent/50 p-3 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Uploading..."}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a,"%"]})]}),(0,s.jsx)(f.E,{value:a,className:"h-2"})]},t)})})]}),$.length>0&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(u._,{className:"text-base font-semibold",children:"Uploaded Files"}),(0,s.jsxs)(o.C,{variant:"secondary",className:"rounded-full",children:[$.length," ",1===$.length?"file":"files"]})]}),(0,s.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:$.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-border rounded-xl bg-card hover:bg-accent/5 transition-colors group",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:ek(e.file_type)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-sm truncate",children:e.filename}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:ew(e.file_size)})]})]}),(0,s.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>eg(e.id),className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-full flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(w.Z,{className:"h-4 w-4"})})]},e.id))})]})]})]}),M&&(0,s.jsxs)(l.Zb,{className:"rounded-xl border-accent/20 bg-accent/5",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(k.Z,{className:"h-5 w-5 text-accent"}),"Invite a Helper"]})}),(0,s.jsxs)(l.aY,{className:"space-y-3",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Need assistance? Invite a family member, friend, or advocate to collaborate on your case."}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d.I,{type:"email",placeholder:"helper@example.com",value:el,onChange:e=>ec(e.target.value),className:"flex-1"}),(0,s.jsx)(c.z,{onClick:ej,disabled:!el||eo,className:"rounded-full",children:eo?(0,s.jsx)(y.Z,{className:"h-4 w-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_,{className:"h-4 w-4 mr-2"}),"Send"]})})]}),eu&&(0,s.jsx)("p",{className:"text-sm text-accent font-medium",children:"âœ“ Invitation sent successfully!"})]})]}),M&&L&&$.length>0&&(0,s.jsx)(l.Zb,{className:"bg-gradient-to-r from-primary/10 to-accent/10 border-primary/30 rounded-xl",children:(0,s.jsx)(l.aY,{className:"pt-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"font-semibold text-xl mb-2",children:"Ready to Generate Your Case Pack!"}),(0,s.jsxs)("p",{className:"text-muted-foreground mb-6",children:["You've completed intake and uploaded ",$.length," pieces of evidence. Generate your professional FIDReC documents now."]}),(0,s.jsxs)(c.z,{size:"lg",className:"rounded-full",children:[(0,s.jsx)(C.Z,{className:"h-5 w-5 mr-2"}),"Generate & Download Case Pack"]})]})})})]})})]})}},6676:function(e,t,a){"use strict";a.d(t,{C:function(){return c}});var s=a(1155);a(225);var r=a(6924),n=a(7987),i=a(2151);let l=(0,n.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:a,asChild:n=!1,...c}=e,o=n?r.g7:"span";return(0,s.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(l({variant:a}),t),...c})}},710:function(e,t,a){"use strict";a.d(t,{z:function(){return c}});var s=a(1155);a(225);var r=a(6924),n=a(7987),i=a(2151);let l=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-5 py-2.5 has-[>svg]:px-4",sm:"h-9 gap-1.5 px-4 has-[>svg]:px-3.5",lg:"h-11 px-7 has-[>svg]:px-5",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:a,size:n,asChild:c=!1,...o}=e,d=c?r.g7:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,i.cn)(l({variant:a,size:n,className:t})),...o})}},7918:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return o},ll:function(){return l}});var s=a(1155);a(225);var r=a(2151);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...a})}},3774:function(e,t,a){"use strict";a.d(t,{I:function(){return n}});var s=a(1155);a(225);var r=a(2151);function n(e){let{className:t,type:a,...n}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-lg border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},9151:function(e,t,a){"use strict";a.d(t,{_:function(){return i}});var s=a(1155);a(225);var r=a(1367),n=a(2151);function i(e){let{className:t,...a}=e;return(0,s.jsx)(r.f,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},8038:function(e,t,a){"use strict";a.d(t,{E:function(){return j}});var s=a(1155),r=a(225),n=a(9459),i=a(5053),l="Progress",[c,o]=(0,n.b)(l),[d,u]=c(l),m=r.forwardRef((e,t)=>{var a,r,n,l;let{__scopeProgress:c,value:o=null,max:u,getValueLabel:m=p,...x}=e;(u||0===u)&&!v(u)&&console.error((a="".concat(u),r="Progress","Invalid prop `max` of value `".concat(a,"` supplied to `").concat(r,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let f=v(u)?u:100;null===o||y(o,f)||console.error((n="".concat(o),l="Progress","Invalid prop `value` of value `".concat(n,"` supplied to `").concat(l,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let b=y(o,f)?o:null,j=g(b)?m(b,f):void 0;return(0,s.jsx)(d,{scope:c,value:b,max:f,children:(0,s.jsx)(i.WV.div,{"aria-valuemax":f,"aria-valuemin":0,"aria-valuenow":g(b)?b:void 0,"aria-valuetext":j,role:"progressbar","data-state":h(b,f),"data-value":null!=b?b:void 0,"data-max":f,...x,ref:t})})});m.displayName=l;var x="ProgressIndicator",f=r.forwardRef((e,t)=>{var a;let{__scopeProgress:r,...n}=e,l=u(x,r);return(0,s.jsx)(i.WV.div,{"data-state":h(l.value,l.max),"data-value":null!==(a=l.value)&&void 0!==a?a:void 0,"data-max":l.max,...n,ref:t})});function p(e,t){return"".concat(Math.round(e/t*100),"%")}function h(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function g(e){return"number"==typeof e}function v(e){return g(e)&&!isNaN(e)&&e>0}function y(e,t){return g(e)&&!isNaN(e)&&e<=t&&e>=0}f.displayName=x;var b=a(2151);function j(e){let{className:t,value:a,...r}=e;return(0,s.jsx)(m,{"data-slot":"progress",className:(0,b.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...r,children:(0,s.jsx)(f,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})}},2600:function(e,t,a){"use strict";a.d(t,{E:function(){return l},m:function(){return c}});var s=a(1155);a(225);var r=a(8356),n=a(1198),i=a(2151);function l(e){let{className:t,...a}=e;return(0,s.jsx)(r.fC,{"data-slot":"radio-group",className:(0,i.cn)("grid gap-3",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)(r.ck,{"data-slot":"radio-group-item",className:(0,i.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,s.jsx)(r.z$,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,s.jsx)(n.Z,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}},6154:function(e,t,a){"use strict";a.d(t,{g:function(){return n}});var s=a(1155);a(225);var r=a(2151);function n(e){let{className:t,...a}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-lg border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}},4607:function(e,t,a){"use strict";a.d(t,{e:function(){return n}});var s=a(1562),r=a(7706);function n(){return(0,s.createBrowserClient)(r.env.NEXT_PUBLIC_SUPABASE_URL,r.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},2151:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(3732),r=a(192);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}},923:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(1128).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},3043:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(1128).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9165:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(1128).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2163:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(1128).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2680:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(1128).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},8566:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(1128).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5430:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(1128).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6478:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(1128).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])}},function(e){e.O(0,[688,708,562,728,468,809,206,660,648,744],function(){return e(e.s=1824)}),_N_E=e.O()}]);